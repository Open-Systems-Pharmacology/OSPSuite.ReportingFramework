---
title: "OSPSuite_ReportingFramework"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{OSPSuite_ReportingFramework}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  warning = FALSE,
  error = FALSE,
  message = FALSE,
  comment = "#>"
)
```

```{r setup, warning=FALSE,error=FALSE,message=FALSE, echo = FALSE}
library(ospsuite.reportingframework)
library(DiagrammeR)
```

# Introduction

This vignette provides an overview of the workflow for data analysis and reporting using the `{ospsuite.reportingframework}` package. The workflow streamlines the process of conducting analyses, generating plots, and creating reports.
It is based on `{esqlabsR}` which facilitates modeling and simulation workflows with OSPS relying on a well defined project structure based on Excel files.
This package is the base for other packages such as Bayesian MultiLevel Model Optimization package `{OSPSuite.BMLM}`

# Typical package workflow

In the sections below it is described how to set up a workflow file and the different sections of the workflow  of `{ospsuite.reportingframework}` are described. 


## Accessing the Workflow Template

To access the default workflow template provided by the package, you can use the following function:

```{r,echo=TRUE,eval=FALSE}
openWorkflowTemplate()
```

 This function will open the workflow template as a new document in your RStudio environment.
 Please use the help functionality for more information what every function called by the workflow does.

### Access via RStudio Addins

You can also access the workflow template through an RStudio addin. 
To use the Addins, simply navigate to the Addins menu in RStudio, and select "Open Template Workflow". This will execute the `openWorkflowTemplate()` function and open the template in a new document.

### Customizing the Workflow Template

By default, the workflow template is loaded from the package's internal templates. If you wish to customize this template, follow these steps:

1. Create your own workflow template script and save it with the name `template_workflow.R`.
2. Place this file in your designated template directory.
3. Set the path to your custom template by using the following option:

```{r,echo=TRUE,eval=FALSE}
options(OSPSuite.RF.PathForWorkflowTemplate = "myTemplateDirectory")
```

After setting this option, calling `openWorkflowTemplate()` or using the Addins will open your customized template instead of the default one.

You can save this option in your ".Rprofile" file. (file.path(Sys.getenv("HOME"), ".Rprofile"). Then it will be set automatically.


## Project initilization:

As first step the project is initialized, that includes 

- adding of  libraryies
- setting of the  workflow options
- set up of the project directory and configuration files using the project structure of `{`{esqlabsR}`}`
- initialisation of the logfile

## Data import

The first step after the initialization should always be the data import.

The input format for input data are csv files. Files can then be imported with a dictionary.
Imported data types a individual and aggregated timeprofile data and individual and aggregated pk-parameter data.

For more information see the **Data Import by Dictionary** vignette (vignette("Data_import_by_dictionary"))

## Setting up and run simulations including PK Parameter calculation

Simulations are set up and run using the`{`{esqlabsR}`}` package.
For more information and detailed documentation, users can visit the [esqlabsR Documentation](https://esqlabs.github.io/esqlabsR/).

The `{ospsuite.reportingframework}`  package provides additional functionality to 

- export random and virtual twin populations(see the **Population** vignette vignette("Population"))
- calculates PK Parameter (see the **PK Parameter** vignette vignette("PK-Parameter"))
 

## Plot and Report Generation

The core of this package is the plot and report creation.
It includes various plotting functions that generate visualizations based on the analysis performed. 

Each plot function is designed to create an R Markdown (`.Rmd`) file, which contains the code and output for the respective plot. This allows for easy documentation and sharing of the results.

The package provides a collection of plot functions, but it provides also interfaces to adjust plots and the usage of customized plot function

For more information see the **Plot Creation** vignette (vignette("Plot-Creation"))

# See also

The package provides also a tutorial to create **Timeprofile reports** (vignette("Tutorial-timeprofiles"))

The package provides 





